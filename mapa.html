<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeebWeb - Mapa Personalizado</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="cameraStyle.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        
        main {
            display: flex;
            gap: 20px;
            padding: 20px;
        }

        #map {
            height: 550px;
            width: 70%;
        }

        .camera-options {
            width: 30%;
            max-height: 550px; /* Limite a altura para rolagem */
            overflow-y: auto; /* Adiciona barra de rolagem se necessário */
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            background: #f9f9f9;
        }

        .camera-options h2 {
            margin-top: 0;
        }

        .camera-options ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .camera-options li {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .camera-options .thumb {
            width: 100px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }

        .camera-options .camera-info {
            flex: 1;
        }

        .camera-info p {
            margin: 0;
            font-weight: bold;
        }

        .camera-info span {
            color: #777;
        }

        /* Resetando a formatação do popup para padrão */
        .leaflet-popup-content {
            font-size: 16px;
            margin: 0px;
            width: 350px;
            height: 250px;
            color: #333;
            padding: 0px;
            border-radius: 7px;
            background-color: #0e1314;
        }

        .leaflet-popup-content-wrapper {
            border-radius: 10px;
            margin: 0px;
            padding: 0px;
            text-align: center;
        }
        .leaflet-popup-content-wrapper,
        .leaflet-popup-tip {
            background: #0e1314;
            color: #333;
            box-shadow: 0 3px 14px rgba(0,0,0,0.4);
            }

        .leaflet-popup-content h3 {
            font-size: 18px;
            color:#f9f9f9   ;
            padding-top: 15px;
        }

        .leaflet-popup-content img {
            padding: 8px;
            width: 350px;
            height: auto;
            display: flex;
            border-radius: 10px;
        }

        .no-style-image {
            border: none;
            padding: 0;
            width: 200px;
            height: auto;
            border-radius: 0;
        }

        .player-icon {
            position: absolute;
            top: -120px;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: url('imagens/player.png') no-repeat center center;
            background-size: contain;
            z-index: 10;
        }

        .leaflet-container a.leaflet-popup-close-button {
            width: 30px;
            font: 20px/32px Tahoma, Verdana, sans-serif;
        }
    </style>
</head>

<body>
    <header>
        <div class="container">
            <div class="logo">
                <img src="imagens/TeebLogo.png" alt="Logo">
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Início</a></li>
                    <li><a href="#">Câmeras</a></li>
                    <li><a href="mapa.html">Mapa</a></li>
                    <li><a href="#">Contato</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <!-- Div para o mapa -->
        <div id="map"></div>

        <!-- Div para as opções de câmeras com rolagem -->
        <div class="camera-options">
            <h2>Opções de Câmera</h2>
            <ul>
                <li>
                    <a href="#">
                        <img src="/imagens/espetinhoRodoviaria.jpeg" alt="Rodoviária Pizzarias" class="thumb">
                        <div class="camera-info">
                            <p>Espetinho Rodoviária</p>
                            <span>81 views · 3 meses ago</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="imagens/caixaEconomica.jpeg" alt="Caixa Econômica Federal" class="thumb">
                        <div class="camera-info">
                            <p>Caixa Econômica Federal</p>
                            <span>91 views · 3 meses ago</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="imagens/pracaAdventista.jpeg" alt="Praça Adventista" class="thumb">
                        <div class="camera-info">
                            <p>Praça Adventista</p>
                            <span>73 views · 3 meses ago</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="imagens/espetinhoRodoviaria.jpeg" alt="Um paraíso em Tianguá" class="thumb">
                        <div class="camera-info">
                            <p>Espetinho Rodoviária</p>
                            <span>152 views · 1 ano ago</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="imagens/container.jpg" alt="Container Shopping" class="thumb">
                        <div class="camera-info">
                            <p>Container Shopping</p>
                            <span>140 views · 1 ano ago</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="imagens/topic.jpg" alt="Praça das Topics" class="thumb">
                        <div class="camera-info">
                            <p>Praça das Topics</p>
                            <span>119 views · 1 ano ago</span>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <img src="imagens/vila.jpg" alt="Vila Mariana" class="thumb">
                        <div class="camera-info">
                            <p>Vila Mariana</p>
                            <span>148 views · 1 ano ago</span>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 TeebWeb. Todos os direitos reservados.</p>
            <p><a href="#">Política de Privacidade</a> | <a href="#">Termos de Uso</a></p>
        </div>
    </footer>

    <!-- Incluindo o JavaScript do Leaflet -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Incluindo o JavaScript do Leaflet.markercluster -->
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <script>
        // Inicializando o mapa com zoom interativo e scroll para zoom
        var map = L.map('map', {
            center: [-3.735286, -41.109326], // Coordenadas iniciais
            zoom: 13, // Zoom inicial
            zoomControl: true, // Controle de zoom no mapa
            scrollWheelZoom: true // Ativar zoom pelo scroll do mouse
        });

        // Adicionando o tile layer do OpenStreetMap com opções otimizadas
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
        }).addTo(map);

        // Criando um grupo de marcadores para o cluster
        var markers = L.markerClusterGroup();

        // Personalizando o marcador
        var customIcon = L.icon({
            iconUrl: 'imagens/video.png', // Caminho do ícone
            iconSize: [38, 38], // Tamanho do ícone
            popupAnchor: [-15, -15], // Posição do popup
        });

        // Função para manter o popup aberto quando o mouse estiver sobre ele
        function keepPopupOpen(popup, marker) {
            var popupElement = popup.getElement();

            // Detecta quando o mouse entra no popup
            popupElement.addEventListener('mouseenter', function () {
                marker.off('mouseout'); // Desativa o fechamento automático
            });

            // Detecta quando o mouse sai do popup
            popupElement.addEventListener('mouseleave', function () {
                marker.on('mouseout', function () {
                    marker.closePopup(); // Reativa o fechamento
                });
            });
        }

        // Adicionando múltiplos marcadores ao cluster
        var locations = [
            { lat: -3.755282, lng: -41.101322, name: "Caixa Econômica", image: "imagens/caixaEconomica.jpeg", link: "camera1.html" },
            { lat: -3.766282, lng: -41.110322, name: "Caixa Econômica", image: "imagens/caixaEconomica.jpeg", link: "camera1.html" },
            { lat: -3.777282, lng: -41.116322, name: "Caixa Econômica", image: "imagens/caixaEconomica.jpeg", link: "camera1.html" },
            { lat: -3.785284, lng: -41.109324, name: "Caixa Econômica", image: "imagens/caixaEconomica.jpeg", link: "camera1.html" },
            { lat: -3.796284, lng: -41.112324, name: "Caixa Econômica", image: "imagens/caixaEconomica.jpeg", link: "camera1.html" },
        ];

        locations.forEach(function (location) {
            var marker = L.marker([location.lat, location.lng], { icon: customIcon });
            var popupContent = `
                <div class="leaflet-popup-content">
                    <h3>${location.name}</h3>
                    <a href="${location.link}" target="_blank">
                        <img src="${location.image}" alt="Imagem 1">
                    </a>
                    <!-- Imagem adicionada com ícone de player -->
                    <div style="position: relative; display: inline-block;">
                        <a href="${location.link}" target="_blank" class="player-link">
                            <div class="player-icon"></div>
                        </a>
                    </div>
                </div>`;

            marker.bindPopup(popupContent);

            // Eventos para abrir o popup ao passar o mouse sobre o marcador
            marker.on('mouseover', function () {
                marker.openPopup();
            });

            // Mantém o popup aberto ao passar o mouse sobre ele
            marker.on('popupopen', function (e) {
                keepPopupOpen(e.popup, marker);
            });

            // Fecha o popup quando o mouse sair do marcador e do popup
            marker.on('mouseout', function () {
                marker.closePopup();
            });

            markers.addLayer(marker);
        });

        // Adicionando o grupo de marcadores ao mapa
        map.addLayer(markers);
    </script>
</body>

</html>
